<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  

  
  <title>wokul</title>
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
  <meta name="description" content="回顾123456789101112131415161718192021222324252627282930313233343536373839404142434445linux基础命令    1.1 远程连接工具：secureCRT    1.2 目录介绍         &#x2F;root        &#x2F;etc        &#x2F;usr        &#x2F;home    1.3 目录操作命令">
<meta property="og:type" content="article">
<meta property="og:title" content="wokul">
<meta property="og:url" content="http://yoursite.com/2020/08/24/%E8%AF%BE%E5%A0%82%E7%AC%94%E8%AE%B0/index.html">
<meta property="og:site_name" content="wokul">
<meta property="og:description" content="回顾123456789101112131415161718192021222324252627282930313233343536373839404142434445linux基础命令    1.1 远程连接工具：secureCRT    1.2 目录介绍         &#x2F;root        &#x2F;etc        &#x2F;usr        &#x2F;home    1.3 目录操作命令">
<meta property="og:locale">
<meta property="og:image" content="http://yoursite.com/2020/08/24/%E8%AF%BE%E5%A0%82%E7%AC%94%E8%AE%B0/assets/1572830154981.png">
<meta property="og:image" content="http://yoursite.com/2020/08/24/%E8%AF%BE%E5%A0%82%E7%AC%94%E8%AE%B0/assets/1572831906153.png">
<meta property="og:image" content="http://yoursite.com/2020/08/24/%E8%AF%BE%E5%A0%82%E7%AC%94%E8%AE%B0/assets/1572832359329.png">
<meta property="og:image" content="http://yoursite.com/2020/08/24/%E8%AF%BE%E5%A0%82%E7%AC%94%E8%AE%B0/assets/1572832752757.png">
<meta property="og:image" content="http://yoursite.com/2020/08/24/%E8%AF%BE%E5%A0%82%E7%AC%94%E8%AE%B0/assets/1572833433863.png">
<meta property="og:image" content="http://yoursite.com/2020/08/24/%E8%AF%BE%E5%A0%82%E7%AC%94%E8%AE%B0/assets/1572833584814.png">
<meta property="og:image" content="http://yoursite.com/2020/08/24/%E8%AF%BE%E5%A0%82%E7%AC%94%E8%AE%B0/assets/1572834041587.png">
<meta property="og:image" content="http://yoursite.com/2020/08/24/%E8%AF%BE%E5%A0%82%E7%AC%94%E8%AE%B0/assets/1572834503151.png">
<meta property="og:image" content="http://yoursite.com/2020/08/24/%E8%AF%BE%E5%A0%82%E7%AC%94%E8%AE%B0/assets/1572836947546.png">
<meta property="og:image" content="http://yoursite.com/2020/08/24/%E8%AF%BE%E5%A0%82%E7%AC%94%E8%AE%B0/assets/1572839537527.png">
<meta property="og:image" content="http://yoursite.com/2020/08/24/%E8%AF%BE%E5%A0%82%E7%AC%94%E8%AE%B0/assets/1572840642917.png">
<meta property="og:image" content="http://yoursite.com/2020/08/24/%E8%AF%BE%E5%A0%82%E7%AC%94%E8%AE%B0/assets/1572849631762.png">
<meta property="og:image" content="http://yoursite.com/2020/08/24/%E8%AF%BE%E5%A0%82%E7%AC%94%E8%AE%B0/assets/1572849808422.png">
<meta property="og:image" content="http://yoursite.com/2020/08/24/%E8%AF%BE%E5%A0%82%E7%AC%94%E8%AE%B0/assets/1572850226687.png">
<meta property="og:image" content="http://yoursite.com/2020/08/24/%E8%AF%BE%E5%A0%82%E7%AC%94%E8%AE%B0/assets/1572850783283.png">
<meta property="og:image" content="http://yoursite.com/2020/08/24/%E8%AF%BE%E5%A0%82%E7%AC%94%E8%AE%B0/assets/1572851000145.png">
<meta property="og:image" content="http://yoursite.com/2020/08/24/%E8%AF%BE%E5%A0%82%E7%AC%94%E8%AE%B0/assets/1572851321081.png">
<meta property="og:image" content="http://yoursite.com/2020/08/24/%E8%AF%BE%E5%A0%82%E7%AC%94%E8%AE%B0/assets/1572852700223.png">
<meta property="og:image" content="http://yoursite.com/2020/08/24/%E8%AF%BE%E5%A0%82%E7%AC%94%E8%AE%B0/assets/1572853121292.png">
<meta property="article:published_time" content="2020-08-24T02:03:27.096Z">
<meta property="article:modified_time" content="2020-02-15T04:01:35.281Z">
<meta property="article:author" content="shuai">
<meta name="twitter:card" content="summary">
<meta name="twitter:image" content="http://yoursite.com/2020/08/24/%E8%AF%BE%E5%A0%82%E7%AC%94%E8%AE%B0/assets/1572830154981.png">
  
    <link rel="alternate" href="/atom.xml" title="wokul" type="application/atom+xml">
  
  
    <link rel="icon" href="/favicon.png">
  
  
    <link href="//fonts.googleapis.com/css?family=Source+Code+Pro" rel="stylesheet" type="text/css">
  
  
<link rel="stylesheet" href="/css/style.css">

<meta name="generator" content="Hexo 5.0.2"></head>

<body>
  <div id="container">
    <div id="wrap">
      <header id="header">
  <div id="banner"></div>
  <div id="header-outer" class="outer">
    <div id="header-title" class="inner">
      <h1 id="logo-wrap">
        <a href="/" id="logo">wokul</a>
      </h1>
      
    </div>
    <div id="header-inner" class="inner">
      <nav id="main-nav">
        <a id="main-nav-toggle" class="nav-icon"></a>
        
          <a class="main-nav-link" href="/">Home</a>
        
          <a class="main-nav-link" href="/archives">Archives</a>
        
      </nav>
      <nav id="sub-nav">
        
          <a id="nav-rss-link" class="nav-icon" href="/atom.xml" title="RSS Feed"></a>
        
        <a id="nav-search-btn" class="nav-icon" title="Search"></a>
      </nav>
      <div id="search-form-wrap">
        <form action="//google.com/search" method="get" accept-charset="UTF-8" class="search-form"><input type="search" name="q" class="search-form-input" placeholder="Search"><button type="submit" class="search-form-submit">&#xF002;</button><input type="hidden" name="sitesearch" value="http://yoursite.com"></form>
      </div>
    </div>
  </div>
</header>
      <div class="outer">
        <section id="main"><article id="post-课堂笔记" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2020/08/24/%E8%AF%BE%E5%A0%82%E7%AC%94%E8%AE%B0/" class="article-date">
  <time datetime="2020-08-24T02:03:27.096Z" itemprop="datePublished">2020-08-24</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
    <div class="article-entry" itemprop="articleBody">
      
        <h1 id="回顾"><a href="#回顾" class="headerlink" title="回顾"></a>回顾</h1><figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br></pre></td><td class="code"><pre><span class="line">linux基础命令</span><br><span class="line"><span class="code">    1.1 远程连接工具：secureCRT</span></span><br><span class="line"><span class="code">    1.2 目录介绍 </span></span><br><span class="line"><span class="code">        /root</span></span><br><span class="line"><span class="code">        /etc</span></span><br><span class="line"><span class="code">        /usr</span></span><br><span class="line"><span class="code">        /home</span></span><br><span class="line"><span class="code">    1.3 目录操作命令</span></span><br><span class="line"><span class="code">        查看：ll</span></span><br><span class="line"><span class="code">        切换：cd</span></span><br><span class="line"><span class="code">        创建：mkdir -p</span></span><br><span class="line"><span class="code">        搜索：find / -name &#x27;条件&#x27;</span></span><br><span class="line"><span class="code">        剪切：mv 旧位置 新位置</span></span><br><span class="line"><span class="code">        复制：cp -r 旧位置 新位置</span></span><br><span class="line"><span class="code">        删除：rmdir -p</span></span><br><span class="line"><span class="code">    1.4 文件操作命令    </span></span><br><span class="line"><span class="code">        创建：touch</span></span><br><span class="line"><span class="code">        查看：cat/less/head/tail</span></span><br><span class="line"><span class="code">        删除：rm -rf </span></span><br><span class="line"><span class="code">        编辑：vim 文件</span></span><br><span class="line"><span class="code">            命令模式：esc</span></span><br><span class="line"><span class="code">            插入模式：i</span></span><br><span class="line"><span class="code">            低行模式：:wq! | q!</span></span><br><span class="line"><span class="code">    1.5 文件压缩</span></span><br><span class="line"><span class="code">        打包：tar -zcvf xxxtar.gz *</span></span><br><span class="line"><span class="code">        解压缩：tar -zxvf xxxtar.gz -C/指定目录</span></span><br><span class="line"><span class="code">    1.6 文件权限</span></span><br><span class="line"><span class="code">        第一部分：文件类型</span></span><br><span class="line"><span class="code">            d：文件夹</span></span><br><span class="line"><span class="code">            l：链接</span></span><br><span class="line"><span class="code">            -：文件</span></span><br><span class="line"><span class="code">        第二部分：当前用户</span></span><br><span class="line"><span class="code">        第三部分：组内用户</span></span><br><span class="line"><span class="code">        第四部分：其他用户</span></span><br><span class="line"><span class="code">            r：读        4</span></span><br><span class="line"><span class="code">            w：写        2</span></span><br><span class="line"><span class="code">            x：执行    1</span></span><br><span class="line"><span class="code">            </span></span><br><span class="line"><span class="code">        chmod -R 777 目录</span></span><br><span class="line"><span class="code">    1.7 其他</span></span><br><span class="line"><span class="code">        查看当前位置：pwd</span></span><br><span class="line"><span class="code">        内容搜索：grep -i</span></span><br><span class="line"><span class="code">        查看进程：ps -ef | grep -i</span></span><br><span class="line"><span class="code">        杀死进程：kill -9 pid</span></span><br><span class="line"><span class="code">        管道：|</span></span><br></pre></td></tr></table></figure>



<h1 id="Nginx-amp-项目部署"><a href="#Nginx-amp-项目部署" class="headerlink" title="Nginx&amp;项目部署"></a>Nginx&amp;项目部署</h1><p><strong>今日目标</strong></p>
<figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="bullet">1.</span> linux网络</span><br><span class="line"><span class="code">    网卡</span></span><br><span class="line"><span class="code">    防火墙</span></span><br><span class="line"><span class="code">    </span></span><br><span class="line"><span class="code">2. nginx</span></span><br><span class="line"><span class="code">    2.1 静态资源服务器</span></span><br><span class="line"><span class="code">    2.2 反向代理服务器</span></span><br><span class="line"><span class="code">    2.3 负载均衡服务器</span></span><br><span class="line"><span class="code">    </span></span><br><span class="line"><span class="code">3. 软件部署设计</span></span><br><span class="line"><span class="code"></span></span><br><span class="line"><span class="code">4. 软件安装</span></span><br><span class="line"><span class="code">    4.1 常用几种安装方式</span></span><br><span class="line"><span class="code">    4.2 远程上传文件几种方式</span></span><br><span class="line"><span class="code">    4.4 jdk、tomcat、nginx、mysql、redis</span></span><br><span class="line"><span class="code">    </span></span><br><span class="line"><span class="code">5. 项目部署</span></span><br></pre></td></tr></table></figure>



<h2 id="一-Linux网络"><a href="#一-Linux网络" class="headerlink" title="一 Linux网络"></a>一 Linux网络</h2><h3 id="1-1-网络（卡）服务"><a href="#1-1-网络（卡）服务" class="headerlink" title="1.1 网络（卡）服务"></a>1.1 网络（卡）服务</h3><p>查看当前网络的状态，并启动和停止网络服务。</p>
<figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"><span class="bullet">*</span> 查看ip</span><br><span class="line"><span class="code">        ifconfig</span></span><br><span class="line"><span class="code">        ip addr</span></span><br><span class="line"><span class="code">        </span></span><br><span class="line"><span class="code">* 修改网卡ip</span></span><br><span class="line"><span class="code">        vim /etc/sysconfig/network-scripts/ifcfg-ens33</span></span><br><span class="line"><span class="code">        </span></span><br><span class="line"><span class="code">* 概要信息如下        </span></span><br><span class="line"><span class="code">        DEVICE=ens33                      #网卡名称</span></span><br><span class="line"><span class="code">        TYPE=Ethernet                   #网卡类型 以太网</span></span><br><span class="line"><span class="code">        ONBOOT=yes                      #是否开机就使用此网卡   在我们安装的时候都已经配置好</span></span><br><span class="line"><span class="code">        BOOTPROTO=dhcp                    #启动网卡时指定获取IP地址的方式</span></span><br><span class="line"><span class="code">            常用取值：dhcp               （自动获取ip地址,网关,子网掩码等信息无需设置） </span></span><br><span class="line"><span class="code">            常用取值：static             （静态ip,如需要访问网络,需要自己设置ip地址等信息） </span></span><br><span class="line"><span class="code">            其他取值：none               （不指定）</span></span><br><span class="line"><span class="code">            </span></span><br><span class="line"><span class="code">          IPADDR=192.168.200.133    #ip地址</span></span><br><span class="line"><span class="code">        GATEWAY=192.168.200.2     #网关</span></span><br><span class="line"><span class="code">        NETMASK=255.255.255.0     #子网掩码</span></span><br><span class="line"><span class="code">        DNS1=8.8.8.8              # Google提供的公用DNS</span></span><br><span class="line"><span class="code">        </span></span><br><span class="line"><span class="code">* 重启网卡服务</span></span><br><span class="line"><span class="code">        systemctl status network       查看指定服务的状态</span></span><br><span class="line"><span class="code">        systemctl stop network         停止指定服务</span></span><br><span class="line"><span class="code">        systemctl start network        启动指定服务</span></span><br><span class="line"><span class="code">        systemctl restart network      重启指定服务</span></span><br></pre></td></tr></table></figure>



<h3 id="1-2-防火墙服务【理解】"><a href="#1-2-防火墙服务【理解】" class="headerlink" title="1.2 防火墙服务【理解】"></a>1.2 防火墙服务【理解】</h3><p>​    防火墙类似于一个安全卫士管家，它能对你访问它人电脑，它人访问你的电脑，进行拦截并处理，有的阻止，有的放行，有的转发。</p>
<p><img src="assets/1572830154981.png" alt="1572830154981"></p>
<h4 id="1）-防火墙设置"><a href="#1）-防火墙设置" class="headerlink" title="1） 防火墙设置"></a>1） 防火墙设置</h4><figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="bullet">*</span> 开启防火墙</span><br><span class="line"><span class="code">        systemctl start firewalld</span></span><br><span class="line"><span class="code">        </span></span><br><span class="line"><span class="code">* 重启防火墙</span></span><br><span class="line"><span class="code">        systemctl restart firewalld</span></span><br><span class="line"><span class="code">        </span></span><br><span class="line"><span class="code">* 关闭防火墙</span></span><br><span class="line"><span class="code">        systemctl stop firewalld</span></span><br><span class="line"><span class="code">        </span></span><br><span class="line"><span class="code">* 设置开机启动</span></span><br><span class="line"><span class="code">        systemctl enable firewalld</span></span><br><span class="line"><span class="code">        </span></span><br><span class="line"><span class="code">* 停止并关闭开机启动</span></span><br><span class="line"><span class="code">        systemctl disable firewalld</span></span><br><span class="line"><span class="code">        </span></span><br><span class="line"><span class="code">* 查看防火墙状态</span></span><br><span class="line"><span class="code">        systemctl status firewalld    或者 firewall-cmd --state</span></span><br><span class="line"><span class="code">        </span></span><br><span class="line"><span class="code">* 查看防火墙开机时是否启动</span></span><br><span class="line"><span class="code">        systemctl list-unit-files | grep firewalld</span></span><br></pre></td></tr></table></figure>



<h4 id="2-）端口设置"><a href="#2-）端口设置" class="headerlink" title="2 ）端口设置"></a>2 ）端口设置</h4><figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="bullet">*</span> 添加</span><br><span class="line"><span class="code">        firewall-cmd --zone=public --add-port=80/tcp --permanent</span></span><br><span class="line"><span class="code">        </span></span><br><span class="line"><span class="code">* 更新防火墙规则</span></span><br><span class="line"><span class="code">        firewall-cmd --reload</span></span><br><span class="line"><span class="code">        </span></span><br><span class="line"><span class="code">* 查看</span></span><br><span class="line"><span class="code">        firewall-cmd --zone=public --query-port=80/tcp</span></span><br><span class="line"><span class="code">        firewall-cmd --zone=public --list-ports</span></span><br><span class="line"><span class="code">        </span></span><br><span class="line"><span class="code">* 删除</span></span><br><span class="line"><span class="code">        firewall-cmd --zone=public --remove-port=80/tcp --permanent</span></span><br><span class="line"><span class="code">                </span></span><br><span class="line"><span class="code">* 常用端口</span></span><br><span class="line"><span class="code">        8080    tomcat</span></span><br><span class="line"><span class="code">        80        http协议</span></span><br><span class="line"><span class="code">        443        https协议</span></span><br><span class="line"><span class="code">        22        ssh远程连接</span></span><br><span class="line"><span class="code">        3306    mysql</span></span><br><span class="line"><span class="code">        6379    redis</span></span><br></pre></td></tr></table></figure>





<h2 id="二-Nginx"><a href="#二-Nginx" class="headerlink" title="二 Nginx"></a>二 Nginx</h2><h3 id="2-1-介绍"><a href="#2-1-介绍" class="headerlink" title="2.1 介绍"></a>2.1 介绍</h3><p>Nginx是一款轻量级的 Web 服务器,由俄罗斯的程序设计师伊戈尔·西索夫所开发。<br>Nginx性能非常优秀,官方测试能够支撑5万并发链接，并且 cpu、内存等资源消耗却非常低，运行非常稳定。</p>
<p>Nginx的功能有很多，我们主要使用它来做静态资源服务器、负载均衡服务器和反向代理服务器。</p>
<h3 id="2-2-应用场景"><a href="#2-2-应用场景" class="headerlink" title="2.2 应用场景"></a>2.2 应用场景</h3><h4 id="1）静态资源服务器"><a href="#1）静态资源服务器" class="headerlink" title="1）静态资源服务器"></a>1）静态资源服务器</h4><p>部署网站的静态资源（html、css、js）</p>
<p><img src="assets/1572831906153.png" alt="1572831906153"> </p>
<h4 id="2）反向代理服务器"><a href="#2）反向代理服务器" class="headerlink" title="2）反向代理服务器"></a>2）反向代理服务器</h4><p><strong>代理</strong>:  给某个对象提供一个代理对象，并由代理对象控制原对象的引用</p>
<p><strong>正向代理</strong>: 对客户端进行代理(例如VPN)</p>
<p><img src="assets/1572832359329.png" alt="1572832359329"></p>
<p><strong>反向代理</strong>: 对服务端进行代理</p>
<p>反向代理，就是对服务端进行代理，作为客户端,只需要将请求发送到反向代理服务器，由反向代理服务器去选择目标服务器获取数据后，再响应给客户端，此时反向代理服务器和目标服务器对外就是一个服务器，暴露的是反向代理服务器地址，隐藏了真实服务器IP地址。</p>
<p><img src="assets/1572832752757.png" alt="1572832752757"> </p>
<h4 id="3）负载均衡服务器"><a href="#3）负载均衡服务器" class="headerlink" title="3）负载均衡服务器"></a>3）负载均衡服务器</h4><p>负载均衡<em>（Load Balance）</em>意思就是将一份负载分摊到多个操作单元上进行执行</p>
<p><img src="assets/1572833433863.png" alt="1572833433863"></p>
<h3 id="2-3-windows安装和使用"><a href="#2-3-windows安装和使用" class="headerlink" title="2.3 windows安装和使用"></a>2.3 windows安装和使用</h3><figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="bullet">1.</span> 官网地址：</span><br><span class="line"><span class="code">    http://nginx.org/</span></span><br><span class="line"><span class="code"></span></span><br><span class="line"><span class="code">2. 绿色解压版</span></span><br><span class="line"><span class="code"></span></span><br><span class="line"><span class="code">3. 启动：</span></span><br><span class="line"><span class="code">    双击nginx.exe即可启动程序</span></span><br><span class="line"><span class="code"></span></span><br><span class="line"><span class="code">4. 访问：</span></span><br><span class="line"><span class="code">    在浏览器输入：http://localhost:80</span></span><br><span class="line"><span class="code"></span></span><br><span class="line"><span class="code">5. dos命令行关闭：</span></span><br><span class="line"><span class="code">     nginx.exe -s stop</span></span><br></pre></td></tr></table></figure>



<p><img src="assets/1572833584814.png" alt="1572833584814"></p>
<h3 id="2-4-配置文件介绍"><a href="#2-4-配置文件介绍" class="headerlink" title="2.4 配置文件介绍"></a>2.4 配置文件介绍</h3><p><strong>nginx.conf 配置文件</strong></p>
<p><img src="assets/1572834041587.png" alt="1572834041587"> </p>
<blockquote>
<p>注意：修改了配置文件  nginx.exe -s reload 重新加载配置文件</p>
</blockquote>
<h3 id="2-5-nginx与tomcat区别"><a href="#2-5-nginx与tomcat区别" class="headerlink" title="2.5 nginx与tomcat区别"></a>2.5 nginx与tomcat区别</h3><figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="bullet">1.</span> 存放的文件形式</span><br><span class="line"><span class="code">    Nginx是http服务器,只能解析静态文件</span></span><br><span class="line"><span class="code">    Tomcat是web中间件(本质上是一个servlet),能解析jsp和静态文件</span></span><br><span class="line"><span class="code">    </span></span><br><span class="line"><span class="code">2. 用途</span></span><br><span class="line"><span class="code">    nginx可以作为反向代理服务器,负责均衡服务器,静态资源存放服务器</span></span><br><span class="line"><span class="code">    tomcat能作为servlet容器使用,静态资源存放服务器</span></span><br><span class="line"><span class="code">    </span></span><br><span class="line"><span class="code">3. 性能</span></span><br><span class="line"><span class="code">    nginx支持5W+并发,tomcat的并发只能在200-400之间</span></span><br></pre></td></tr></table></figure>



<h2 id="三-软件部署的设计"><a href="#三-软件部署的设计" class="headerlink" title="三 软件部署的设计"></a>三 软件部署的设计</h2><p><strong>目标：在linux服务器上，运行黑马旅游网</strong></p>
<p>依赖软件环境：jdk、tomcat、mysql、redis、nginx</p>
<p><img src="assets/1572834503151.png" alt="1572834503151"> </p>
<h2 id="四-软件安装"><a href="#四-软件安装" class="headerlink" title="四 软件安装"></a>四 软件安装</h2><h3 id="4-1-软件安装介绍"><a href="#4-1-软件安装介绍" class="headerlink" title="4.1 软件安装介绍"></a>4.1 软件安装介绍</h3><p><strong>Linux上的软件安装有以下几种常见方式</strong></p>
<figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><span class="line"><span class="bullet">1.</span>  二进制发布包（绿色压缩包）</span><br><span class="line"><span class="code">        软件已经针对具体平台编译打包发布</span></span><br><span class="line"><span class="code">        开发人员拿到安装包之后只要解压，修改配置即可使用</span></span><br><span class="line"><span class="code">        </span></span><br><span class="line"><span class="code">2.    RPM包</span></span><br><span class="line"><span class="code">        软件已经按照redhat的包管理工具规范RPM进行打包发布，需要获取到相应的软件RPM发布包，然后用RPM命令        进行安装。</span></span><br><span class="line"><span class="code">    rpm命令安装</span></span><br><span class="line"><span class="code">       语法:  rpm 参数  安装包</span></span><br><span class="line"><span class="code">        参数:</span></span><br><span class="line"><span class="code">            -v 显示指令执行过程</span></span><br><span class="line"><span class="code">            -h 表示显示进度</span></span><br><span class="line"><span class="code">            -q 查询包是否已经安装</span></span><br><span class="line"><span class="code">            -a 查看所有安装的软件</span></span><br><span class="line"><span class="code">            -i 安装软件</span></span><br><span class="line"><span class="code">            -U 更新升级</span></span><br><span class="line"><span class="code">            -e 卸载软件</span></span><br><span class="line"><span class="code">            --nodeps 不验证软件的相互关联性 </span></span><br><span class="line"><span class="code">       常用命令:</span></span><br><span class="line"><span class="code">            安装：rpm  -ivh  rpm文件</span></span><br><span class="line"><span class="code">            升级：rpm  -Uvh  rpm文件</span></span><br><span class="line"><span class="code">            卸载：rpm  -e --nodeps 软件名</span></span><br><span class="line"><span class="code">            查看所有安装的软件：rpm -qa | grep 具体名</span></span><br><span class="line"><span class="code">        </span></span><br><span class="line"><span class="code">3.    Yum在线安装</span></span><br><span class="line"><span class="code">        软件已经以RPM规范打包，但发布在了网络上的一些服务器上，可用yum在线安装服务器上的rpm软件，并且会    自动解决软件安装过程中的库依赖问题。</span></span><br><span class="line"><span class="code">        yum install 软件名 </span></span><br><span class="line"><span class="code">           yum localinstall rpm包  使用yum安装本地rpm包[此过程会自动解决依赖]</span></span><br><span class="line"><span class="code">           </span></span><br><span class="line"><span class="code">4.     源码包</span></span><br><span class="line"><span class="code">        此种安装包软件以源码工程的形式发布,需要程序员自行编译安装</span></span><br><span class="line"><span class="code">        它一般包含四个步骤:</span></span><br><span class="line"><span class="code">        解压------&gt;配置-------&gt;编译--------&gt;安装</span></span><br></pre></td></tr></table></figure>

<p><strong>上传与下载工具</strong></p>
<figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="bullet">1.</span> sftp</span><br><span class="line"><span class="code">        使用alt + p 组合键打开sftp窗口</span></span><br><span class="line"><span class="code">    </span></span><br><span class="line"><span class="code">        get: 将远程（linux）目录中文件下载到本地目录（开发者）</span></span><br><span class="line"><span class="code">        put: 将本地目录中文件上传到远程主机(linux)</span></span><br><span class="line"><span class="code">        quit: 断开FTP连接</span></span><br><span class="line"><span class="code">        pwd: 查询linux主机所在目录(也就是远程主机目录)</span></span><br><span class="line"><span class="code">        lpwd: windows上传文件的目录，我们可以通过查看”选项“下拉框中的”会话选项修改</span></span><br><span class="line"><span class="code">        ls: 查询连接到当前linux主机所在目录有哪些文件</span></span><br><span class="line"><span class="code">        lls: 查询当前本地上传目录有哪些文件</span></span><br><span class="line"><span class="code">        lcd: 改变本地上传目录的路径</span></span><br><span class="line"><span class="code">        cd: 改变远程上传目录      </span></span><br><span class="line"><span class="code"></span></span><br><span class="line"><span class="code">2. lrzsz</span></span><br><span class="line"><span class="code">        我们可以使用yum安装方式安装： yum install lrzsz</span></span><br><span class="line"><span class="code">        注意：必须有网络</span></span><br><span class="line"><span class="code">        rz 上传</span></span><br><span class="line"><span class="code">        sz 下载</span></span><br><span class="line"><span class="code">        </span></span><br><span class="line"><span class="code">3. SecureFX工具</span></span><br><span class="line"><span class="code">        注意：如果上传的文件名有中文，是会有乱码</span></span><br></pre></td></tr></table></figure>



<h3 id="4-2-JDK安装"><a href="#4-2-JDK安装" class="headerlink" title="4.2 JDK安装"></a>4.2 JDK安装</h3><figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="section">#1. 查看当前Linux系统是否已经安装java</span></span><br><span class="line"><span class="code">    rpm -qa | grep -i java</span></span><br><span class="line"><span class="code">        </span></span><br><span class="line"><span class="code">#2. 解压已上传的JDK压缩包，并移动到/usr/local目录下</span></span><br><span class="line"><span class="code">    tar -zxvf /root/jdk-8u201-linux-x64.tar.gz -C/usr/local/</span></span><br><span class="line"><span class="code"></span></span><br><span class="line"><span class="code">#3. 测试jdk</span></span><br><span class="line"><span class="code">    /usr/local/jdk1.8.0_201/bin/java -version</span></span><br><span class="line"><span class="code">        </span></span><br><span class="line"><span class="code">#4. 配置环境变量</span></span><br><span class="line"><span class="code">    vim /etc/profile</span></span><br><span class="line"><span class="code">        export JAVA_HOME=/usr/local/jdk1.8.0_201</span></span><br><span class="line"><span class="code">        export PATH=$PATH:$JAVA_HOME/bin</span></span><br><span class="line"><span class="code">        </span></span><br><span class="line"><span class="code">#5. 更新环境变量</span></span><br><span class="line"><span class="code">    source /etc/profile</span></span><br><span class="line"><span class="code">    </span></span><br><span class="line"><span class="code">#6. 测试</span></span><br><span class="line"><span class="code">    java -version</span></span><br></pre></td></tr></table></figure>

<p><img src="assets/1572836947546.png" alt="1572836947546"> </p>
<h3 id="4-3-Tomcat安装"><a href="#4-3-Tomcat安装" class="headerlink" title="4.3 Tomcat安装"></a>4.3 Tomcat安装</h3><figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="section">#1. 解压已上传的Tomcat压缩包，到/user/local目录下</span></span><br><span class="line"><span class="code">        cd /usr/local</span></span><br><span class="line"><span class="code">        tar -zxvf /root/apache-tomcat-8.5.27.tar.gz </span></span><br><span class="line"><span class="code">#2. 启动tomcat</span></span><br><span class="line"><span class="code">        /usr/local/apache-tomcat-8.5.27/bin/startup.sh</span></span><br><span class="line"><span class="code">        </span></span><br><span class="line"><span class="code">#3. 动态查看日志</span></span><br><span class="line"><span class="code">        tail -f /usr/local/apache-tomcat-8.5.27/logs/catalina.out </span></span><br><span class="line"><span class="code">        </span></span><br><span class="line"><span class="code">#4. 防火墙放行端口</span></span><br><span class="line"><span class="code">        firewall-cmd --zone=public --add-port=8080/tcp --permanent</span></span><br><span class="line"><span class="code">        firewall-cmd --reload</span></span><br><span class="line"><span class="code">        </span></span><br><span class="line"><span class="code">#5. 关闭tomcat</span></span><br><span class="line"><span class="code">        /usr/local/apache-tomcat-8.5.27/bin/shutdown.sh </span></span><br></pre></td></tr></table></figure>



<h3 id="4-4-Nginx安装"><a href="#4-4-Nginx安装" class="headerlink" title="4.4 Nginx安装"></a>4.4 Nginx安装</h3><p>nginx由c语言编写，我给大家提供的源码包</p>
<figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line"><span class="section">#1. 安装必须库</span></span><br><span class="line"><span class="code">    yum  install  gcc-c++ pcre pcre-devel zlib zlib-devel openssl openssl-devel -y</span></span><br><span class="line"><span class="code">    </span></span><br><span class="line"><span class="code">#2. 解压文件</span></span><br><span class="line"><span class="code">    cd /usr/local</span></span><br><span class="line"><span class="code">    tar -zxvf /root/nginx-1.13.9.tar.gz  </span></span><br><span class="line"><span class="code">    </span></span><br><span class="line"><span class="code">#3. 配置</span></span><br><span class="line"><span class="code">    cd /usr/local/nginx-1.13.9</span></span><br><span class="line"><span class="code">    ./configure --prefix=/usr/local/nginx</span></span><br><span class="line"><span class="code">    </span></span><br><span class="line"><span class="code">#4. 编译</span></span><br><span class="line"><span class="code">    make</span></span><br><span class="line"><span class="code">    </span></span><br><span class="line"><span class="code">#5. 安装</span></span><br><span class="line"><span class="code">    make install</span></span><br><span class="line"><span class="code">    </span></span><br><span class="line"><span class="code">#6. 启动</span></span><br><span class="line"><span class="code">    /usr/local/nginx/sbin/nginx</span></span><br><span class="line"><span class="code">    </span></span><br><span class="line"><span class="code">#7. 防火墙放行端口</span></span><br><span class="line"><span class="code">    firewall-cmd  --zone=public  --add-port=80/tcp  --permanent</span></span><br><span class="line"><span class="code">    firewall-cmd --reload</span></span><br><span class="line"><span class="code">    </span></span><br><span class="line"><span class="code">#8. 停止nginx</span></span><br><span class="line"><span class="code">    /usr/local/nginx/sbin/nginx -s stop   #停止服务</span></span><br><span class="line"><span class="code">    /usr/local/nginx/sbin/nginx -s reload  #重新加载配置</span></span><br><span class="line"><span class="code">    /usr/local/nginx/sbin/nginx -s restart #重启</span></span><br></pre></td></tr></table></figure>



<h3 id="4-5-MySQL安装【难度】"><a href="#4-5-MySQL安装【难度】" class="headerlink" title="4.5 MySQL安装【难度】"></a>4.5 MySQL安装【难度】</h3><figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br></pre></td><td class="code"><pre><span class="line"><span class="section">#1. 查看CentOS是否自带的mysql</span></span><br><span class="line"><span class="code">    rpm -qa | grep -i mysql</span></span><br><span class="line"><span class="code">    rpm -qa | grep -i mariadb</span></span><br><span class="line"><span class="code">    </span></span><br><span class="line"><span class="code">#2. 卸载mariadb</span></span><br><span class="line"><span class="code">    rpm -e --nodeps mariadb-libs-5.5.56-2.el7.x86_64</span></span><br><span class="line"><span class="code"></span></span><br><span class="line"><span class="code">#3. 解压文件</span></span><br><span class="line"><span class="code">    mkdir -p /usr/local/mysql</span></span><br><span class="line"><span class="code">    tar -xvf /root/MySQL-5.5.49-1.linux2.6.i386.rpm-bundle.tar -C/usr/local/mysql</span></span><br><span class="line"><span class="code">    </span></span><br><span class="line"><span class="code">#4. 升级包依赖</span></span><br><span class="line"><span class="code">    yum install libgcc.i686 -y</span></span><br><span class="line"><span class="code">    </span></span><br><span class="line"><span class="code">#5. 安装服务端</span></span><br><span class="line"><span class="code">    yum localinstall /usr/local/mysql/MySQL-server-5.5.49-1.linux2.6.i386.rpm -y</span></span><br><span class="line"><span class="code">    </span></span><br><span class="line"><span class="code">#6. 安装客户端</span></span><br><span class="line"><span class="code">    yum localinstall /usr/local/mysql/MySQL-client-5.5.49-1.linux2.6.i386.rpm -y</span></span><br><span class="line"><span class="code">    </span></span><br><span class="line"><span class="code">#7. 启动mysql服务器</span></span><br><span class="line"><span class="code">    systemctl start mysql</span></span><br><span class="line"><span class="code">    </span></span><br><span class="line"><span class="code">#8. 设置root用户密码</span></span><br><span class="line"><span class="code">    /usr/bin/mysqladmin -u root password &#x27;root&#x27;</span></span><br><span class="line"><span class="code">    </span></span><br><span class="line"><span class="code">#9. 防火墙放行端口</span></span><br><span class="line"><span class="code">    firewall-cmd --zone=public --add-port=3306/tcp --permanent</span></span><br><span class="line"><span class="code">    firewall-cmd --reload</span></span><br><span class="line"><span class="code">    </span></span><br><span class="line"><span class="code">#10. 开启mysql的远程登录权限</span></span><br><span class="line"><span class="code">    mysql -uroot -proot</span></span><br><span class="line"><span class="code">    &gt; CREATE USER &#x27;root&#x27;@&#x27;%&#x27; IDENTIFIED BY &#x27;root&#x27;;</span></span><br><span class="line"><span class="code">    &gt; GRANT ALL PRIVILEGES ON *.* TO &#x27;root&#x27;@&#x27;%&#x27; ;</span></span><br><span class="line"><span class="code">    &gt; FLUSH PRIVILEGES;</span></span><br><span class="line"><span class="code">    &gt; exit;</span></span><br><span class="line"><span class="code">    </span></span><br><span class="line"><span class="code">#11. MySQL编码问题（默认安装完毕为 ISO-8859-1）</span></span><br><span class="line"><span class="code">    1. 查找mysql的配置文件</span></span><br><span class="line"><span class="code">        find / -name &#x27;MySQL*&#x27;</span></span><br><span class="line"><span class="code">    2. 将文件复制到/etc目录下,并重新命名为my.cnf(这是服务启动时默认读取的位置)</span></span><br><span class="line"><span class="code">        cp /usr/share/doc/MySQL-server-5.5.49/my-medium.cnf   /etc/my.cnf</span></span><br><span class="line"><span class="code">    3. 编辑/etc/my.cnf,在[mysqld]选项下添加字符集的设置</span></span><br><span class="line"><span class="code">        vim /etc/my.cnf</span></span><br><span class="line"><span class="code">              [mysqld]</span></span><br><span class="line"><span class="code">            character-set-server=utf8</span></span><br><span class="line"><span class="code">    4. 重新启动mysql的服务</span></span><br><span class="line"><span class="code">        systemctl restart mysql    </span></span><br></pre></td></tr></table></figure>



<p><img src="assets/1572839537527.png" alt="1572839537527"> </p>
<p><img src="assets/1572840642917.png" alt="1572840642917"> </p>
<h3 id="3-6-Redis安装"><a href="#3-6-Redis安装" class="headerlink" title="3.6 Redis安装"></a>3.6 Redis安装</h3><p>提供的源码包</p>
<figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"><span class="section">#1. 解压文件</span></span><br><span class="line"><span class="code">        cd ~</span></span><br><span class="line"><span class="code">        tar -zxvf /root/redis-3.0.7.tar.gz </span></span><br><span class="line"><span class="code">            </span></span><br><span class="line"><span class="code">#2. 编译</span></span><br><span class="line"><span class="code">        cd /root/redis-3.0.7</span></span><br><span class="line"><span class="code">        make</span></span><br><span class="line"><span class="code">        </span></span><br><span class="line"><span class="code">#3. 安装</span></span><br><span class="line"><span class="code">        make PREFIX=/usr/local/redis install</span></span><br><span class="line"><span class="code">        </span></span><br><span class="line"><span class="code">#4. 复制配置文件到/usr/local/redis/bin</span></span><br><span class="line"><span class="code">        cp /root/redis-3.0.7/redis.conf /usr/local/redis/bin/</span></span><br><span class="line"><span class="code">        </span></span><br><span class="line"><span class="code">#5. 设置后台启动</span></span><br><span class="line"><span class="code">        vim /usr/local/redis/bin/redis.conf</span></span><br><span class="line"><span class="code">            daemonize yes</span></span><br><span class="line"><span class="code">#6. 启动redis</span></span><br><span class="line"><span class="code">        /usr/local/redis/bin/redis-server /usr/local/redis/bin/redis.conf</span></span><br><span class="line"><span class="code">        </span></span><br><span class="line"><span class="code">#7. 防火墙放行端口</span></span><br><span class="line"><span class="code">        firewall-cmd --zone=public --add-port=6379/tcp --permanent</span></span><br><span class="line"><span class="code">        firewall-cmd --reload</span></span><br><span class="line"><span class="code">        </span></span><br><span class="line"><span class="code">#8. 关闭redis</span></span><br><span class="line"><span class="code">        /usr/local/redis/bin/redis-cli shutdown</span></span><br></pre></td></tr></table></figure>



<h2 id="五-项目部署"><a href="#五-项目部署" class="headerlink" title="五 项目部署"></a>五 项目部署</h2><h3 id="5-1-环境确认"><a href="#5-1-环境确认" class="headerlink" title="5.1 环境确认"></a>5.1 环境确认</h3><figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="bullet">*</span> 语法</span><br><span class="line"><span class="code">        netstat -antup</span></span><br><span class="line"><span class="code">        netstat -antup | grep 端口号</span></span><br><span class="line"><span class="code">        </span></span><br><span class="line"><span class="code">* 参数解释        </span></span><br><span class="line"><span class="code">        -antup    查看当前正在使用的udp和tcp协议的端口号和进程号</span></span><br></pre></td></tr></table></figure>

<p><img src="assets/1572849631762.png" alt="1572849631762"> </p>
<h3 id="5-2-数据库迁移"><a href="#5-2-数据库迁移" class="headerlink" title="5.2 数据库迁移"></a>5.2 数据库迁移</h3><figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="bullet">1.</span> 将window的travel库做一个备份</span><br><span class="line"></span><br><span class="line"><span class="bullet">2.</span> 使用sqlyog远程连接linux的mysql来实现还原</span><br></pre></td></tr></table></figure>

<p><img src="assets/1572849808422.png" alt="1572849808422"> </p>
<h3 id="5-3-Tomcat部署项目"><a href="#5-3-Tomcat部署项目" class="headerlink" title="5.3 Tomcat部署项目"></a>5.3 Tomcat部署项目</h3><figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="bullet">1.</span> 将travel项目通过maven命令进行打包</span><br><span class="line"><span class="code">    tarvel.war</span></span><br><span class="line"><span class="code">    </span></span><br><span class="line"><span class="code">2. 通过客户端工具远程上传到 linux上</span></span><br><span class="line"><span class="code"></span></span><br><span class="line"><span class="code">3. 复制到tomcat1中webapps目录下（自动解压）</span></span><br></pre></td></tr></table></figure>

<p><img src="assets/1572850226687.png" alt="1572850226687"> </p>
<h3 id="5-4-nginx配置反向代理"><a href="#5-4-nginx配置反向代理" class="headerlink" title="5.4 nginx配置反向代理"></a>5.4 nginx配置反向代理</h3><p>修改 nginx.cnf 配置文件</p>
<figure class="highlight nginx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="attribute">upstream</span> tomcat_server &#123;</span><br><span class="line">    <span class="attribute">server</span> localhost:<span class="number">8080</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="section">server</span> &#123;</span><br><span class="line">        <span class="attribute">listen</span>       <span class="number">80</span>;</span><br><span class="line">        <span class="attribute">server_name</span>  localhost;</span><br><span class="line">        <span class="attribute">location</span> / &#123;</span><br><span class="line">            <span class="comment"># root   html;</span></span><br><span class="line">            <span class="comment">#声明反向代理</span></span><br><span class="line">            <span class="attribute">proxy_pass</span>  http://tomcat_server; </span><br><span class="line">            <span class="attribute">index</span>  index.html index.htm;</span><br><span class="line">        &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>



<p><strong>我们可以使用notpad++ 实现远程连接，对配置文件可以直接操作</strong></p>
<p><img src="assets/1572850783283.png" alt="1572850783283"></p>
<p><img src="assets/1572851000145.png" alt="1572851000145"> </p>
<p><strong>注意：重写加载nginx配置</strong></p>
<figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">/usr/local/nginx/sbin/nginx -s reload</span><br></pre></td></tr></table></figure>





<p><strong>反向代理执行流程</strong></p>
<p><img src="assets/1572851321081.png" alt="1572851321081"> </p>
<h3 id="5-5-nginx配置负载均衡"><a href="#5-5-nginx配置负载均衡" class="headerlink" title="5.5 nginx配置负载均衡"></a>5.5 nginx配置负载均衡</h3><figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line"><span class="section">#1 将当前tomcat1停止运行</span></span><br><span class="line">      /usr/local/tomcat1/bin/shutdown.sh</span><br><span class="line">      </span><br><span class="line"><span class="section">#2. 复制tomcat1为tomcat2</span></span><br><span class="line"><span class="code">    cp -r /usr/local/tomcat1 /usr/local/tomcat2</span></span><br><span class="line"><span class="code">    </span></span><br><span class="line"><span class="code">#3. 修改tomcat2的3个端口</span></span><br><span class="line"><span class="code">    vim /usr/local/tomcat2/conf/server.xml</span></span><br><span class="line"><span class="code">    8005--&gt;8015   8009--&gt;8019  8080--&gt;8081</span></span><br><span class="line"><span class="code">    </span></span><br><span class="line"><span class="code">#4. 放行8081端口</span></span><br><span class="line"><span class="code">      firewall-cmd --zone=public --add-port=8081/tcp --permanent</span></span><br><span class="line"><span class="code">    firewall-cmd --reload  </span></span><br><span class="line"><span class="code">    </span></span><br><span class="line"><span class="code">#5. 启动两个tomcat</span></span><br><span class="line"><span class="code">    /usr/local/tomcat1/bin/startup.sh</span></span><br><span class="line"><span class="code">    /usr/local/tomcat2/bin/startup.sh</span></span><br><span class="line"><span class="code">    </span></span><br><span class="line"><span class="code">#6. 在nginx中配置负载均衡策略</span></span><br><span class="line"><span class="code">    vim /usr/local/nginx/conf/nginx.conf</span></span><br><span class="line"><span class="code">        upstream tomcat_server&#123;</span></span><br><span class="line"><span class="code">           server localhost:8080 weight=2;</span></span><br><span class="line"><span class="code">           server localhost:8081 weight=1;</span></span><br><span class="line"><span class="code">        &#125;</span></span><br><span class="line"><span class="code">    </span></span><br><span class="line"><span class="code">#7. 重新加载nginx配置</span></span><br><span class="line"><span class="code">    /usr/local/nginx/sbin/nginx -s reload</span></span><br><span class="line"><span class="code">    </span></span><br><span class="line"><span class="code">#8. 同时开启两个窗口,通过动态查看tomcat日志可见结果</span></span><br><span class="line"><span class="code">    tail -f /usr/local/tomcat1/logs/catalina.out</span></span><br><span class="line"><span class="code">    tail -f /usr/local/tomcat2/logs/catalina.out</span></span><br></pre></td></tr></table></figure>

<p><img src="assets/1572852700223.png" alt="1572852700223"> </p>
<p><img src="assets/1572853121292.png" alt="1572853121292"> </p>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://yoursite.com/2020/08/24/%E8%AF%BE%E5%A0%82%E7%AC%94%E8%AE%B0/" data-id="cke7vnfwv0001toum295t0cul" class="article-share-link">Share</a>
      
      
    </footer>
  </div>
  
    
<nav id="article-nav">
  
  
    <a href="/2020/08/13/hello-world/" id="article-nav-older" class="article-nav-link-wrap">
      <strong class="article-nav-caption">Older</strong>
      <div class="article-nav-title">Hello World</div>
    </a>
  
</nav>

  
</article>

</section>
        
          <aside id="sidebar">
  
    

  
    

  
    
  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Archives</h3>
    <div class="widget">
      <ul class="archive-list"><li class="archive-list-item"><a class="archive-list-link" href="/archives/2020/08/">August 2020</a></li></ul>
    </div>
  </div>


  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Recent Posts</h3>
    <div class="widget">
      <ul>
        
          <li>
            <a href="/2020/08/24/%E8%AF%BE%E5%A0%82%E7%AC%94%E8%AE%B0/">(no title)</a>
          </li>
        
          <li>
            <a href="/2020/08/13/hello-world/">Hello World</a>
          </li>
        
      </ul>
    </div>
  </div>

  
</aside>
        
      </div>
      <footer id="footer">
  
  <div class="outer">
    <div id="footer-info" class="inner">
      &copy; 2020 shuai<br>
      Powered by <a href="http://hexo.io/" target="_blank">Hexo</a>
    </div>
  </div>
</footer>
    </div>
    <nav id="mobile-nav">
  
    <a href="/" class="mobile-nav-link">Home</a>
  
    <a href="/archives" class="mobile-nav-link">Archives</a>
  
</nav>
    

<script src="//ajax.googleapis.com/ajax/libs/jquery/2.0.3/jquery.min.js"></script>


  
<link rel="stylesheet" href="/fancybox/jquery.fancybox.css">

  
<script src="/fancybox/jquery.fancybox.pack.js"></script>




<script src="/js/script.js"></script>




  </div>
</body>
</html>